const AQI_SCALE = {
  'pm25': [
    [[0, 12], [0, 50]],
    [[12, 35.5], [50, 100]],
    [[35.5, 55.5], [100, 150]],
    [[55.5, 150.5], [150, 200]],
    [[150.5, 250.5], [200, 300]],
    [[250.5, 350.5], [300, 400]],
    [[350.5, 500.5], [400, 500]]
  ],
  'pm10': [
    [[0, 55], [0, 50]],
    [[55, 155], [50, 100]],
    [[155, 255], [100, 150]],
    [[255, 355], [150, 200]],
    [[355, 425], [200, 300]],
    [[425, 505], [300, 400]],
    [[505, 605], [400, 500]]
  ]
}

const __AQI = (data, scale) => {
  scale = AQI_SCALE[scale];
  for (let i of scale) {
    if (i[0][0] <= data && data <= i[0][1]) {
      return ((data - i[0][0]) / (i[0][1] - i[0][0])) * (i[1][1] - i[1][0]) + i[1][0];
    }
  }
  return 0;
}

module.exports = __AQI;

